<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Thông Tin Cá Nhân</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=PT+Serif:wght@400;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Libraries Stylesheet -->
    <link rel="stylesheet" th:href="@{/assets/lib/animate/animate.min.css}">
    <link rel="stylesheet" th:href="@{/assets/lib/lightbox/css/lightbox.min.css}">
    <link rel="stylesheet" th:href="@{/assets/lib/owlcarousel/assets/owl.carousel.min.css}">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/assets/js/home/checkAuthPage.js}"></script>
    <!-- Customized Bootstrap Stylesheet -->
    <link th:href="@{/assets/css/home/bootstrap.min.css}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link rel="stylesheet" th:href="@{/assets/css/home/style.css}">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #fef8fc;
            margin: 0;
            padding: 0;
            color: #333;
        }
        button.swal2-styled{
            width: auto;
        }
    </style>
</head>
<div class="container-fluid sticky-top px-0">
    <div th:replace="~{home/component/header :: header}"></div>
</div>
<body>

<div class="profile-container">
    <div class="profile-header">
        <div style="display: flex">
            <div id="avatar-container">
                <img id="avatar-img" src="" alt="Avatar" style="width: 120px; height: 120px; object-fit: cover;">
                <div class="edit_avt-btn"><i class="fas fa-edit"></i> Edit</div>
            </div>
            <div>
                <h2 id="fullName-display-1"></h2>
            </div>
        </div>

        <a th:href="@{/HistoryBooking}" class="order-history">
            <i class="fas fa-history"></i> Lịch sử đặt lịch
        </a>
    </div>

    <div class="section-title">Thông Tin Cá Nhân</div>

    <div class="profile-field">
        <div class="profile-label">Họ tên</div>
        <div class="profile-value" id="fullName-display-2"></div>
        <div class="d-flex flex-column align-items-center">
            <input class="info-input" id="firstName-input" type="text" value="Nguyễn Văn Huy" style="display: none; " placeholder="Nhập họ">
            <input class="info-input info-input-last mt-2" id="lastName-input" type="text" value="Nguyễn Văn Huy" style="display: none;" placeholder="Nhập tên">
        </div>

        <div class="btn-save">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onUpdateName()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
        <div class="edit"><i class="fas fa-edit"></i> Edit</div>

    </div>

    <div class="profile-field">
        <div class="profile-label">Ngày sinh</div>
        <div class="profile-value" id="birthDate-display"></div>
        <input class="info-input" id="birthDate-input" type="date" value="1999-12-25" style="display: none;">
        <div class="btn-save-date">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onUpdateBirthDate()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
        <div class="edit"><i class="fas fa-edit"></i> Edit</div>
    </div>

    <div class="profile-field">
        <div class="profile-label">Email</div>
        <div class="profile-value" id="email-display"></div>
        <input class="info-input" id="email-input" type="text" value="huylamnhat244@gmail.com" style="display: none;" placeholder="Nhập Email">
        <div class="btn-save">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onUpdateEmail()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
        <div class="edit"><i class="fas fa-edit"></i> Edit</div>
    </div>

    <div class="profile-field">
        <div class="profile-label">Số điện thoại</div>
        <div class="profile-value" id="phone-display"></div>
        <input class="info-input" id="phone-input" type="text" value="0123456789" style="display: none;" placeholder="Nhập số điện thoại">
        <div class="btn-save">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onUpdatePhone()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
        <div class="edit"><i class="fas fa-edit"></i> Edit</div>
    </div>

    <div class="profile-field">
        <div class="profile-label">Giới tính</div>
        <div class="profile-value" id="gender-display"></div>
        <select class="info-input" id="gender-input" style="display: none;">
            <option value="1">Nam</option>
            <option value="2">Nữ</option>
            <option value="0">Khác</option>
        </select>
        <div class="btn-save-gender">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onUpdateGender()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
        <div class="edit"><i class="fas fa-edit"></i> Edit</div>
    </div>

    <div class="profile-field-1">
        <div class="profile-label">Mật Khẩu</div>
        <div class="profile-value">*********</div>

        <div class="password-new">
            <!-- Current password input -->
            <input class="info-input" type="password" id="current-password" placeholder="Nhập mật khẩu hiện tại" style="display: none;">

            <!-- New password input -->
            <input class="info-input" type="password" id="new-password" placeholder="Nhập mật khẩu mới" style="display: none;">

            <!-- Confirm new password input -->
            <input class="info-input" type="password" id="confirm-password" placeholder="Xác nhận mật khẩu mới" style="display: none;">
        </div>


        <div class="edit" style="display: inline-block;position: relative;right: -17px;"><i class="fas fa-edit"></i> Edit</div>

        <div class="btn-save">
            <div class="save-btn" style="display: none;" onclick="onLoadInfo.onChangePassword()">Lưu</div>
            <div class="cancel-btn" style="display: none;">Hủy</div>
        </div>
    </div>

</div>


</body>
<script>
    document.querySelectorAll('.profile-field').forEach(item => {
        const editBtn = item.querySelector('.edit');
        const saveBtn = item.querySelector('.save-btn');
        const cancelBtn = item.querySelector('.cancel-btn');
        const span = item.querySelector('.profile-value');
        const input = item.querySelector('.info-input');
        const inputLastName = item.querySelector('.info-input-last');

        editBtn.addEventListener('click', () => {
            if (input) input.style.display = 'inline-block';
            if (inputLastName) inputLastName.style.display = 'inline-block';
            if (saveBtn) saveBtn.style.display = 'inline-block';
            if (cancelBtn) cancelBtn.style.display = 'inline-block';
            if (span) span.style.display = 'none';
            editBtn.style.display = 'none';
        });

        cancelBtn.addEventListener('click', () => {
            if (input) input.style.display = 'none';
            if (inputLastName) inputLastName.style.display = 'none';
            if (saveBtn) saveBtn.style.display = 'none';
            if (cancelBtn) cancelBtn.style.display = 'none';
            if (span) span.style.display = 'inline-block';
            editBtn.style.display = 'inline-block';
        });

        saveBtn.addEventListener('click', () => {
            if (span && input) span.textContent = input.value;
            if (input) input.style.display = 'none';
            if (inputLastName) inputLastName.style.display = 'none';
            if (saveBtn) saveBtn.style.display = 'none';
            if (cancelBtn) cancelBtn.style.display = 'none';
            if (span) span.style.display = 'inline-block';
            editBtn.style.display = 'inline-block';

            // TODO: Gọi API cập nhật thông tin nếu cần
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        const profileField = document.querySelector('.profile-field-1');
        const editBtn = profileField.querySelector('.edit');
        const saveBtn = profileField.querySelector('.save-btn');
        const cancelBtn = profileField.querySelector('.cancel-btn');
        const currentPasswordInput = profileField.querySelector('#current-password');
        const newPasswordInput = profileField.querySelector('#new-password');
        const confirmPasswordInput = profileField.querySelector('#confirm-password');
        const profileValue = profileField.querySelector('.profile-value');

        // Khi nhấn nút "Sửa"
        editBtn.addEventListener('click', () => {
            // Hiển thị các trường nhập mật khẩu
            currentPasswordInput.style.display = 'inline-block';
            newPasswordInput.style.display = 'inline-block';
            confirmPasswordInput.style.display = 'inline-block';

            // Ẩn giá trị hiển thị mật khẩu (thay thế bằng dấu "*")
            profileValue.style.display = 'none';

            // Hiển thị các nút Lưu và Hủy
            saveBtn.style.display = 'inline-block';
            cancelBtn.style.display = 'inline-block';

            // Ẩn nút "Sửa"
            editBtn.style.display = 'none';
        });

        // Khi nhấn nút "Hủy"
        cancelBtn.addEventListener('click', () => {
            // Ẩn các trường nhập mật khẩu
            currentPasswordInput.style.display = 'none';
            newPasswordInput.style.display = 'none';
            confirmPasswordInput.style.display = 'none';

            // Hiển thị lại mật khẩu cũ
            profileValue.style.display = 'inline-block';

            // Ẩn các nút Lưu và Hủy
            saveBtn.style.display = 'none';
            cancelBtn.style.display = 'none';

            // Hiển thị lại nút "Sửa"
            editBtn.style.display = 'inline-block';
        });
    });


</script>
</html>
